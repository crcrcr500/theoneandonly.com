html
  head
    title Shark

    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="viewport" content="width=device-width, initial-scale=1")

    link(rel='stylesheet' type='text/css' href='css/application.css')

  body(ng-app='shark')
    .navbar.navbar-default.navbar-fixed-top(role='navigation' ng-controller='ProxiesCtrl')
      .container-fluid
        .navbar-header
          button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='.navbar-collapse')
            span.sr-only Toggle navigation
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.navbar-brand(href='#') http-shark

        .navbar-collapse.collapse
          ul.nav.navbar-nav.navbar-right
            li(ng-show='selected')
              a.btn.btn-default(ng-click='togglePaused()' ng-class="{'btn-primary': !paused}")
                span.glyphicon.glyphicon-pause(ng-show='paused')
                span.glyphicon.glyphicon-play(ng-hide='paused')
            li
              a.dropdown-toggle(href='#', data-toggle='dropdown')
                span(ng-show='selected' ng-bind='selected')
                span(ng-hide='selected') Subdomains
                span.caret

              ul.dropdown-menu(role='menu')
                li
                  a
                    span.glyphicon.glyphicon-plus
                    | &nbsp;
                    | Add Subdomain

                li.divider

                li(ng-repeat='(alias, url) in proxies')
                  a(ng-click='select(alias)')
                    b(ng-bind='alias')
                    p(ng-bind='url')
                    span.glyphicon.glyphicon-remove(ng-click='remove(alias)')

    div(ng-controller='ProxiesCtrl')
      .container(ng-if='!selected')
        .row(ng-controller='AddProxyCtrl')
          .col-md-8.col-md-offset-2
            .jumbotron
              h1 Add a Subdomain

              form(role='form' ng-submit='add()')
                .form-group
                  label.control-label(for='url') Target URL
                  input.form-control(name='url' type='url' required ng-model='newProxy.url' autofocus)

                .form-group
                  label.control-label(for='alias') Incoming Subdomain
                  input.form-control(name='alias' type='text' required ng-model='newProxy.alias')

                button.btn.btn-lg.btn-block.btn-primary
                  span.glyphicon.glyphicon-plus-sign
                  | &nbsp;
                  | Add

      .container-fluid(ng-if='selected' ng-controller='TracesCtrl')
        .row(ng-show='pausedTraces.length > 0')
          .col-md-12
            p
              | Paused. {{pausedTraces.length}} new traces added.

        .row(ng-repeat='trace in traces')
          .col-md-12
            span.code.badge(ng-bind='trace.response.code')
            span.verb(ng-bind='trace.request.method')
            span.url(ng-bind='trace.request.url')

    script(src='lib/jquery/dist/jquery.js')
    script(src='lib/bootstrap-sass/dist/js/bootstrap.js')
    script(src='/socket.io/socket.io.js')
    script(src='lib/angular/angular.min.js')
    script(src='lib/angular-socket-io/socket.min.js')
    script(src='js/application.js')
